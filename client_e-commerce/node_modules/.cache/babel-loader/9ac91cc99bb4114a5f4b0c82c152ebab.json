{"ast":null,"code":"import _objectSpread from \"/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/src/ShoppingCart.js\";\nimport React from 'react';\nimport SoldOut from './SoldOut';\nimport axios from 'axios';\n\nvar ShoppingCart =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ShoppingCart, _React$Component);\n\n  function ShoppingCart() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ShoppingCart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ShoppingCart)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      total: 0,\n      title: \"\",\n      stock: '',\n      price: \"\",\n      color: '',\n      img: '',\n      _id: '',\n      shoppingCart: [],\n      display: 'none',\n      id: ''\n    };\n\n    _this.componentDidMount = function () {\n      _this.showProductsInBag();\n    };\n\n    _this.showProductsInBag =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var cart, cart_ids, url, products_in_bag, newCart;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];\n              debugger;\n              cart_ids = cart.map(function (ele) {\n                return ele._id;\n              });\n              url = \"http://localhost:3001/products/products_in_bag/\".concat(cart_ids);\n              _context.prev = 4;\n              _context.next = 7;\n              return axios.get(url);\n\n            case 7:\n              products_in_bag = _context.sent;\n              debugger;\n              newCart = [];\n              products_in_bag.data.bag.forEach(function (ele, i) {\n                if (ele._id === cart[i]._id) {\n                  ele.quantity = cart[i].quantity;\n                }\n\n                newCart.push(ele);\n              });\n\n              _this.setState({\n                shoppingCart: newCart\n              }, function () {\n                console.log(_this.state);\n              });\n\n              _this.handleTotal(); //console.log('array of ids===>', cart_ids, 'shoppingCart========>', cart, '====== joined array', this.state.shoppingCart)\n\n\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](4);\n              console.log({\n                error: _context.t0\n              });\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[4, 15]]);\n    }));\n    _this.handleTotal =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var total;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              total = 0;\n\n              if (_this.state.shoppingCart) {\n                _this.state.shoppingCart.forEach(function (ele, i) {\n                  var subtotal = Number(ele.price * ele.quantity);\n                  total += subtotal;\n                });\n              }\n\n              _this.setState({\n                total: total\n              });\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    _this.goShopping = function () {\n      _this.props.history.push({\n        pathname: \"/products\"\n      });\n    };\n\n    _this.checkOut = function () {\n      if (_this.props.loggedIn === false) {\n        _this.props.history.push(\"/guestform\");\n      } else {\n        _this.props.history.push(\"/checkout\");\n      }\n    };\n\n    _this.deleteFromCart = function (ele) {\n      console.log('this is the ele from delete item', ele);\n      var shoppingCart = _this.state.shoppingCart;\n      var index = shoppingCart.findIndex(function (el) {\n        return el._id === ele._id;\n      });\n      shoppingCart.splice(index, 1);\n\n      _this.setState({\n        shoppingCart: shoppingCart\n      });\n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart));\n    };\n\n    _this.increaseOne = function (i) {\n      var shoppingCart = _this.state.shoppingCart;\n      debugger;\n\n      if (shoppingCart[i].stock > 0) {\n        shoppingCart[i].quantity++;\n      } else {\n        alert('out of stock');\n      }\n\n      debugger;\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart));\n\n      _this.showProductsInBag();\n    };\n\n    _this.decreaseOne = function (i) {\n      var shoppingCart = _this.state.shoppingCart;\n\n      if (shoppingCart[i].quantity > 1) {\n        shoppingCart[i].quantity--;\n      } else {\n        //alert('you wiil remove it?')\n        var decision = window.confirm('Only one left, Are you sure that you wany delete?');\n\n        if (decision) {\n          shoppingCart.splice(i, 1);\n          console.log('==================>', i);\n\n          _this.setState({\n            shoppingCart: shoppingCart\n          });\n        } else {\n          shoppingCart[i].quantity = 1;\n        }\n      }\n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart));\n\n      _this.showProductsInBag();\n    };\n\n    _this.deleteAllCart = function () {\n      var shoppingCart = _this.state.shoppingCart;\n      shoppingCart.splice(0);\n\n      _this.setState({\n        shoppingCart: shoppingCart\n      });\n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart));\n\n      _this.handleTotal();\n    };\n\n    return _this;\n  }\n\n  _createClass(ShoppingCart, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          shoppingCart = _this$state.shoppingCart,\n          total = _this$state.total;\n      return React.createElement(\"div\", {\n        style: decor.small,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: _objectSpread({}, decor.register, decor.border),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Shopping Cart\"), React.createElement(\"div\", {\n        style: decor.borderItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, ['product', 'description', 'color', 'units', 'amount', 'delete'].map(function (ele, i) {\n        return React.createElement(\"p\", {\n          style: decor.descriptions,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, ele);\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, shoppingCart.map(function (ele, i) {\n        return React.createElement(\"div\", {\n          key: i,\n          style: decor.borderItem,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: decor.image,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          style: decor.pic,\n          src: ele.img,\n          alt: \"pic\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          style: decor.items,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, ele.title), React.createElement(\"div\", {\n          style: decor.items,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, ele.color), React.createElement(\"div\", {\n          style: decor.items,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          onClick: function onClick() {\n            return _this2.decreaseOne(i);\n          },\n          style: decor.icons,\n          className: \"fas fa-minus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          style: decor.quantity,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, ele.quantity), React.createElement(\"i\", {\n          onClick: function onClick() {\n            return _this2.increaseOne(i);\n          },\n          style: decor.icons,\n          className: \"fas fa-plus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }), React.createElement(SoldOut, {\n          display: _this2.state.display,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          style: decor.items,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, ele.price), React.createElement(\"div\", {\n          style: decor.trash,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          onClick: function onClick() {\n            return _this2.deleteFromCart(ele);\n          },\n          className: \"fas fa-trash\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        })));\n      })), React.createElement(\"button\", {\n        onClick: this.deleteAllCart,\n        style: decor.deleteAllBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Delete All\"), React.createElement(\"div\", {\n        style: decor.border2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: decor.total,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Total: \", total, \" EUR\"), React.createElement(\"div\", {\n        style: decor.grid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.goShopping,\n        className: \"buttons\",\n        style: decor.buttonLeft,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Continue Shopping\"), React.createElement(\"button\", {\n        onClick: this.checkOut,\n        className: \"buttons\",\n        style: decor.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Check Out\")));\n    }\n  }]);\n\n  return ShoppingCart;\n}(React.Component);\n\nexport { ShoppingCart as default };\nvar decor = {\n  small: {\n    width: '70%',\n    margin: 'auto'\n  },\n  register: {\n    fontSize: '30px',\n    textTransform: 'uppercase',\n    textAlign: 'center'\n  },\n  borderItem: {\n    display: 'grid',\n    gridTemplateColumns: '1.5fr 2fr 1fr 1fr 1fr 1fr',\n    borderBottom: '1px solid rgb(242, 242, 242)'\n  },\n  border: {\n    borderBottom: '2px solid rgb(42, 43, 45)',\n    paddingTop: '2em',\n    paddingBottom: '2em'\n  },\n  image: {\n    height: '15vh',\n    position: 'relative',\n    display: 'block',\n    margin: '15px auto'\n  },\n  pic: {\n    maxWidth: '100px',\n    maxHeight: '100px'\n  },\n  trash: {\n    fontSize: '15px',\n    position: 'relative',\n    display: 'block',\n    margin: 'auto'\n  },\n  descriptions: {\n    position: 'relative',\n    display: 'block',\n    margin: 'auto',\n    fontSize: '15px',\n    textTransform: 'uppercase',\n    paddingTop: '2em',\n    marginBottom: '1em'\n  },\n  items: {\n    position: 'relative',\n    display: 'block',\n    margin: 'auto'\n  },\n  button: {\n    backgroundColor: 'rgb(26, 27, 28)',\n    color: 'white',\n    fontSize: '15px',\n    textTransform: 'uppercase',\n    border: '2px solid rgb(26, 27, 28)',\n    position: 'relative',\n    textAlign: 'center',\n    width: '220px',\n    height: '40px',\n    outline: 'none',\n    marginTop: '2em',\n    marginLeft: 'auto'\n  },\n  buttonLeft: {\n    backgroundColor: 'rgb(26, 27, 28)',\n    color: 'white',\n    fontSize: '15px',\n    textTransform: 'uppercase',\n    border: '2px solid rgb(26, 27, 28)',\n    position: 'relative',\n    textAlign: 'center',\n    width: '220px',\n    height: '40px',\n    outline: 'none',\n    marginTop: '2em',\n    marginRight: 'auto'\n  },\n  grid: {\n    display: 'grid',\n    gridTemplateColumns: '1fr 1fr'\n  },\n  border2: {\n    borderBottom: '2px solid rgb(42, 43, 45)',\n    paddingTop: '2em'\n  },\n  icons: {\n    fontSize: '12px',\n    margin: '10px'\n  },\n  quantity: {\n    border: '1px solid grey',\n    fontSize: '16px',\n    padding: '4px'\n  },\n  total: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    textTransform: 'uppercase',\n    marginTop: '1em',\n    fontSize: '19px',\n    fontWeight: 'bold'\n  },\n  deleteAllBtn: {\n    backgroundColor: 'rgb(26, 27, 28)',\n    color: 'white',\n    fontSize: '10px',\n    textTransform: 'uppercase',\n    border: '2px solid rgb(26, 27, 28)',\n    position: 'relative',\n    textAlign: 'center',\n    width: '100px',\n    height: '20px',\n    outline: 'none',\n    marginTop: '2em',\n    marginLeft: '90%'\n  }\n};","map":{"version":3,"sources":["/Users/cmoribe/Desktop/BCS/e-commerce/client_e-commerce/src/ShoppingCart.js"],"names":["React","SoldOut","axios","ShoppingCart","state","total","title","stock","price","color","img","_id","shoppingCart","display","id","componentDidMount","showProductsInBag","cart","JSON","parse","localStorage","getItem","cart_ids","map","ele","url","get","products_in_bag","newCart","data","bag","forEach","i","quantity","push","setState","console","log","handleTotal","error","subtotal","Number","goShopping","props","history","pathname","checkOut","loggedIn","deleteFromCart","index","findIndex","el","splice","setItem","stringify","increaseOne","alert","decreaseOne","decision","window","confirm","deleteAllCart","decor","small","register","border","borderItem","descriptions","image","pic","items","icons","trash","deleteAllBtn","border2","grid","buttonLeft","button","Component","width","margin","fontSize","textTransform","textAlign","gridTemplateColumns","borderBottom","paddingTop","paddingBottom","height","position","maxWidth","maxHeight","marginBottom","backgroundColor","outline","marginTop","marginLeft","marginRight","padding","justifyContent","fontWeight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SoldOut from './SoldOut'\nimport axios from 'axios'\n\nexport default class ShoppingCart extends React.Component {\nstate = {\n    total:0,\n     title: \"\", \n     stock:'',\n     price: \"\", \n     color:'', \n     img:'', \n     _id:'',\n     shoppingCart:[],\n     display:'none',\n     id:''\n}\ncomponentDidMount = ()=>{\n    this.showProductsInBag();\n};\nshowProductsInBag = async () => {    \n    let cart = JSON.parse( localStorage.getItem('shoppingCart'))|| [];\n    debugger\n    let cart_ids = cart.map(ele=>ele._id);\n    let url = `http://localhost:3001/products/products_in_bag/${cart_ids}`;\n    try{\n        const products_in_bag = await axios.get(url);\n        debugger\n        var newCart = [];\n        products_in_bag.data.bag.forEach((ele, i) => {\n            if(ele._id === cart[i]._id){\n                ele.quantity = cart[i].quantity;\n                \n            }\n            newCart.push(ele);\n        });\n        \n        this.setState({shoppingCart:newCart},()=>{\n            console.log(this.state)\n        })\n        this.handleTotal()\n        //console.log('array of ids===>', cart_ids, 'shoppingCart========>', cart, '====== joined array', this.state.shoppingCart)\n    }\n    catch(error){\n        \n        console.log({error})\n    }\n}\nhandleTotal = async () =>{\n    let total = 0\n        if (this.state.shoppingCart){\n            this.state.shoppingCart.forEach((ele, i)=>{\n                var subtotal = Number(ele.price * ele.quantity)\n                total += subtotal;\n            })\n        }    \n    this.setState({total})\n}\n\ngoShopping=()=>{\n    this.props.history.push({pathname:\"/products\"})\n}\ncheckOut=()=>{\n    if(this.props.loggedIn === false){\n        this.props.history.push(\"/guestform\") \n    } else {\n        this.props.history.push(\"/checkout\")\n    }     \n}\ndeleteFromCart =(ele)=>{\n    console.log( 'this is the ele from delete item', ele)\n    const {shoppingCart} = this.state\n    var index = shoppingCart.findIndex(el => el._id === ele._id);\n    shoppingCart.splice(index, 1)\n    this.setState({shoppingCart})\n    localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart))\n}\nincreaseOne = (i)=>{\n    let shoppingCart  = this.state.shoppingCart;\n    debugger\n    if (shoppingCart[i].stock>0){\n        shoppingCart[i].quantity++;\n    } else{ alert('out of stock')}\n    debugger\n    localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart));\n    this.showProductsInBag();\n}\ndecreaseOne = (i) => {\n    let shoppingCart  = this.state.shoppingCart;\n    if (shoppingCart[i].quantity>1) {\n        shoppingCart[i].quantity--;\n    } else{ \n        //alert('you wiil remove it?')\n        var decision = window.confirm('Only one left, Are you sure that you wany delete?');\n        if(decision){\n            shoppingCart.splice(i, 1)\n            console.log('==================>', i)\n            this.setState({shoppingCart})\n        }else{\n            shoppingCart[i].quantity =1\n        }\n    }\n    localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart));\n    this.showProductsInBag();\n}\ndeleteAllCart = () =>{\n    let { shoppingCart } = this.state \n  shoppingCart.splice(0)\n  this.setState({shoppingCart})\n  localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart))\n  this.handleTotal();\n}\nrender(){\nlet {shoppingCart, total} = this.state\nreturn(\n    <div style={decor.small}>\n        <p style={{...decor.register, ...decor.border}}>Shopping Cart</p>\n        <div style={decor.borderItem}>\n        {\n        ['product','description','color','units','amount','delete'].map((ele,i)=>(\n            <p style={decor.descriptions}>{ele}</p>\n        ))\n        }\n        </div>\n        <div>\n        {\n        shoppingCart.map((ele,i)=>{\n            return( \n                <div key={i} style={decor.borderItem}>\n                <div style={decor.image}><img style={decor.pic}src={ele.img} alt='pic'/></div> \n                <div style={decor.items}>{ele.title}</div>\n                <div style={decor.items}>{ele.color}</div>\n                <div style={decor.items}>\n                    <i onClick={()=>this.decreaseOne(i)} style={decor.icons} className='fas fa-minus'></i>\n                        <span style={decor.quantity}>{ele.quantity}</span>\n                    <i onClick={()=>this.increaseOne(i)} style={decor.icons} className='fas fa-plus'></i>\n                    <SoldOut\n                    display={this.state.display}\n                    />\n                </div>\n                    <div style={decor.items}>{ele.price}</div>\n                    <div style={decor.trash}><i onClick={()=>this.deleteFromCart(ele)} className=\"fas fa-trash\"></i></div>\n                </div>\n            )\n        })\n        }  \n        </div>  \n        <button onClick={this.deleteAllCart} style={decor.deleteAllBtn}>Delete All</button>\n        <div style={decor.border2}></div>\n        <div style={decor.total}>Total: {total} EUR</div>\n        <div style={decor.grid}>\n            <button \n            onClick={this.goShopping}\n            className='buttons' style={decor.buttonLeft}>Continue Shopping</button>  \n            <button \n            onClick={this.checkOut}\n            className='buttons' style={decor.button}>Check Out</button>\n        </div>  \n    </div>\n    )\n}\n}\n\nconst decor = {\n    small: {\n        width: '70%',\n        margin: 'auto'\n    },\n    register: {\n        fontSize: '30px',\n        textTransform: 'uppercase',\n        textAlign: 'center'\n    },\n    borderItem:{\n        display: 'grid',\n        gridTemplateColumns: '1.5fr 2fr 1fr 1fr 1fr 1fr',\n        borderBottom: '1px solid rgb(242, 242, 242)',\n    },    \n    border: {\n        borderBottom: '2px solid rgb(42, 43, 45)',\n        paddingTop: '2em',\n        paddingBottom: '2em'\n    },\n    image:{\n        height:'15vh',\n        position: 'relative',\n        display: 'block',\n        margin: '15px auto'\n    },\n    pic:{\n        maxWidth: '100px',\n        maxHeight: '100px',\n    },\n    trash:{\n        fontSize:'15px',\n        position: 'relative',\n        display: 'block',\n        margin: 'auto'\n    },\n    descriptions:{\n        position: 'relative',\n        display: 'block',\n        margin: 'auto',\n        fontSize: '15px',\n        textTransform: 'uppercase',\n        paddingTop: '2em',\n        marginBottom: '1em'\n    },\n    items:{\n        position: 'relative',\n        display: 'block',\n        margin: 'auto'\n    },\n    button:{\n        backgroundColor: 'rgb(26, 27, 28)',\n        color: 'white',\n        fontSize: '15px',\n        textTransform: 'uppercase',\n        border: '2px solid rgb(26, 27, 28)',\n        position: 'relative',\n        textAlign: 'center',\n        width: '220px',\n        height: '40px',\n        outline: 'none',\n        marginTop: '2em',\n        marginLeft: 'auto',\n    },\n    buttonLeft:{\n        backgroundColor: 'rgb(26, 27, 28)',\n        color: 'white',\n        fontSize: '15px',\n        textTransform: 'uppercase',\n        border: '2px solid rgb(26, 27, 28)',\n        position: 'relative',\n        textAlign: 'center',\n        width: '220px',\n        height: '40px',\n        outline: 'none',\n        marginTop: '2em',\n        marginRight: 'auto',\n    },\n    grid:{\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr'\n    },\n    border2:{\n        borderBottom: '2px solid rgb(42, 43, 45)',\n        paddingTop: '2em' \n    },\n    icons:{\n        fontSize: '12px',\n        margin: '10px'\n    },\n    quantity:{\n        border: '1px solid grey',\n        fontSize: '16px',\n        padding: '4px'\n    },\n    total:{\n        display: 'flex',\n        justifyContent: 'flex-end',\n        textTransform: 'uppercase',\n        marginTop: '1em',\n        fontSize: '19px',\n        fontWeight: 'bold'\n    },\n    deleteAllBtn: {\n        backgroundColor: 'rgb(26, 27, 28)',\n        color: 'white',\n        fontSize: '10px',\n        textTransform: 'uppercase',\n        border: '2px solid rgb(26, 27, 28)',\n        position: 'relative',\n        textAlign: 'center',\n        width: '100px',\n        height: '20px',\n        outline: 'none',\n        marginTop: '2em',\n        marginLeft: '90%'\n      }\n}"]},"metadata":{},"sourceType":"module"}